{% extends "base.html" %}
{% block content %}
<h1>Dashboard</h1>
<div class="row">
  <div class="col card">
    <h3>Medien-Upload</h3>
    <form action="{{ url_for('upload') }}" method="post" enctype="multipart/form-data">
      <input type="file" name="file"><button>Hochladen</button>
    </form>
    <ul>
      {% for f in files %}
        <li><a href="{{ url_for('download_file', file_id=f.id) }}">{{ f.filename }}</a> ({{ f.mimetype or "?" }}, {{ f.size_bytes }} B)</li>
      {% else %}
        <li class="muted">Noch keine Dateien.</li>
      {% endfor %}
    </ul>
  </div>
  <div class="col card">
    <h3>Kalender</h3>
    <p>ICS-Feed (read-only):<br><code>{{ ics_url }}</code></p>
    <form method="post" action="{{ url_for('rotate_token', cal_id=cal.id) }}">
      <button>ICS-Token rotieren</button>
    </form>
  </div>
</div>
{% endblock %}

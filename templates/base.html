<!doctype html>
<html lang="de">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>{{ title or 'Intranet' }}</title>
<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial,sans-serif;margin:2rem;max-width:960px}
  nav a{margin-right:1rem;text-decoration:none}
  nav{margin-bottom:1rem}
  .card{border:1px solid #ddd;border-radius:12px;padding:1rem;margin:1rem 0}
  .row{display:flex;gap:1rem;flex-wrap:wrap}
  .row .col{flex:1 1 300px}
  table{border-collapse:collapse;width:100%}
  th,td{border:1px solid #ddd;padding:.5rem;text-align:left}
  code,pre{background:#f6f8fa;padding:.2rem .4rem;border-radius:6px}
  .danger{color:#b00020}
  .ok{color:#146c43}
  .muted{color:#555}
  input,select,button{padding:.5rem;border:1px solid #ccc;border-radius:8px}
  button{cursor:pointer}
  .badge{display:inline-block;padding:.2rem .5rem;border-radius:999px;background:#eee;font-size:.8rem}
  .right{float:right}
</style>
<body>
<nav>
  {% if current_user.is_authenticated %}
    <a href="{{ url_for('dashboard') }}">Dashboard</a>
    {% if current_user.role == 'admin' %}
      <a href="{{ url_for('admin_panel') }}">Admin</a>
    {% endif %}
    <a href="{{ url_for('profile') }}">Profil</a>
    <a class="right" href="{{ url_for('logout') }}">Logout</a>
  {% else %}
    <a href="{{ url_for('login') }}">Login</a>
    <a href="{{ url_for('register') }}">Registrieren</a>
  {% endif %}
</nav>

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="card">
      {% for cat,msg in messages %}
        <div class="{{ 'ok' if cat=='success' else ('danger' if cat=='error' else 'muted') }}">{{ msg }}</div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}

{% block content %}{% endblock %}
</body>
</html>
